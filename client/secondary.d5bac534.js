import{S as e,i as s,s as a,l as r,n as t,o as l,r as n,x as c,y as o,e as i,t as f,k as u,c as h,a as p,b as d,d as g,m as v,f as m,g as y,h as E,J as T,j as A,T as z,D as $,I as b,A as P,K as C,U as D,V as S,v as w}from"./client.cdb10120.js";import{s as x}from"./address.5b8c75e5.js";import{L as B}from"./LoadingInline.d0cbef8e.js";function H(e,s,a){const r=e.slice();return r[8]=s[a],r}function R(e){let s,a;return s=new B({}),{c(){r(s.$$.fragment)},l(e){t(s.$$.fragment,e)},m(e,r){l(s,e,r),a=!0},i(e){a||(n(s.$$.fragment,e),a=!0)},o(e){c(s.$$.fragment,e),a=!1},d(e){o(s,e)}}}function N(e){let s,a,r,t,l,n,c,o,T,A,$,b,P,C,D,S,w,x,B,R,N=e[2].length+"",j=e[1],k=[];for(let s=0;s<j.length;s+=1)k[s]=O(H(e,j,s));return{c(){s=i("h3"),a=f(N),r=f(" unique traders"),t=u(),l=i("table"),n=i("tr"),c=i("th"),o=f("APP"),T=u(),A=i("th"),$=f("Seller"),b=u(),P=i("th"),C=u(),D=i("th"),S=f("Buyer"),w=u(),x=i("th"),B=f("Price"),R=u();for(let e=0;e<k.length;e+=1)k[e].c();this.h()},l(e){s=h(e,"H3",{});var i=p(s);a=d(i,N),r=d(i," unique traders"),i.forEach(g),t=v(e),l=h(e,"TABLE",{class:!0});var f=p(l);n=h(f,"TR",{});var u=p(n);c=h(u,"TH",{class:!0});var m=p(c);o=d(m,"APP"),m.forEach(g),T=v(u),A=h(u,"TH",{class:!0});var y=p(A);$=d(y,"Seller"),y.forEach(g),b=v(u),P=h(u,"TH",{class:!0}),p(P).forEach(g),C=v(u),D=h(u,"TH",{class:!0});var E=p(D);S=d(E,"Buyer"),E.forEach(g),w=v(u),x=h(u,"TH",{class:!0});var z=p(x);B=d(z,"Price"),z.forEach(g),u.forEach(g),R=v(f);for(let e=0;e<k.length;e+=1)k[e].l(f);f.forEach(g),this.h()},h(){m(c,"class","svelte-1epznf0"),m(A,"class","seller svelte-1epznf0"),m(P,"class","arrow svelte-1epznf0"),m(D,"class","svelte-1epznf0"),m(x,"class","price svelte-1epznf0"),m(l,"class","svelte-1epznf0")},m(e,i){y(e,s,i),E(s,a),E(s,r),y(e,t,i),y(e,l,i),E(l,n),E(n,c),E(c,o),E(n,T),E(n,A),E(A,$),E(n,b),E(n,P),E(n,C),E(n,D),E(D,S),E(n,w),E(n,x),E(x,B),E(l,R);for(let e=0;e<k.length;e+=1)k[e].m(l,null)},p(e,s){if(2&s){let a;for(j=e[1],a=0;a<j.length;a+=1){const r=H(e,j,a);k[a]?k[a].p(r,s):(k[a]=O(r),k[a].c(),k[a].m(l,null))}for(;a<k.length;a+=1)k[a].d(1);k.length=j.length}},d(e){e&&g(s),e&&g(t),e&&g(l),z(k,e)}}}function O(e){let s,a,r,t,l,n,c,o,z,$,b,P,C,D,S,w,B,H,R=e[8].unit+"",N=x(e[8].seller)+"",O=x(e[8].buyer)+"",j=e[8].price+"";return{c(){s=i("tr"),a=i("td"),r=f(R),t=u(),l=i("td"),n=f(N),c=u(),o=i("td"),z=f("➞"),$=u(),b=i("td"),P=f(O),C=u(),D=i("td"),S=f(j),w=i("img"),H=u(),this.h()},l(e){s=h(e,"TR",{});var i=p(s);a=h(i,"TD",{class:!0});var f=p(a);r=d(f,R),f.forEach(g),t=v(i),l=h(i,"TD",{class:!0});var u=p(l);n=d(u,N),u.forEach(g),c=v(i),o=h(i,"TD",{class:!0});var m=p(o);z=d(m,"➞"),m.forEach(g),$=v(i),b=h(i,"TD",{class:!0});var y=p(b);P=d(y,O),y.forEach(g),C=v(i),D=h(i,"TD",{class:!0});var E=p(D);S=d(E,j),w=h(E,"IMG",{class:!0,src:!0,alt:!0}),E.forEach(g),H=v(i),i.forEach(g),this.h()},h(){m(a,"class","svelte-1epznf0"),m(l,"class","seller svelte-1epznf0"),m(o,"class","arrow svelte-1epznf0"),m(b,"class","svelte-1epznf0"),m(w,"class","algos svelte-1epznf0"),T(w.src,B="/images/algo-logo.svg")||m(w,"src","/images/algo-logo.svg"),m(w,"alt","Algos"),m(D,"class","price svelte-1epznf0")},m(e,i){y(e,s,i),E(s,a),E(a,r),E(s,t),E(s,l),E(l,n),E(s,c),E(s,o),E(o,z),E(s,$),E(s,b),E(b,P),E(s,C),E(s,D),E(D,S),E(D,w),E(s,H)},p(e,s){2&s&&R!==(R=e[8].unit+"")&&A(r,R),2&s&&N!==(N=x(e[8].seller)+"")&&A(n,N),2&s&&O!==(O=x(e[8].buyer)+"")&&A(P,O),2&s&&j!==(j=e[8].price+"")&&A(S,j)},d(e){e&&g(s)}}}function j(e){let s,a,r,t,l,o,T,A,z=e[0]&&R(),b=e[1].length&&N(e);return{c(){s=i("div"),a=i("h1"),r=f("Secondary\n    "),t=i("span"),l=f("Buyers and Sellers"),o=u(),z&&z.c(),T=u(),b&&b.c(),this.h()},l(e){s=h(e,"DIV",{class:!0});var n=p(s);a=h(n,"H1",{class:!0});var c=p(a);r=d(c,"Secondary\n    "),t=h(c,"SPAN",{class:!0});var i=p(t);l=d(i,"Buyers and Sellers"),i.forEach(g),c.forEach(g),o=v(n),z&&z.l(n),T=v(n),b&&b.l(n),n.forEach(g),this.h()},h(){m(t,"class","subtitle"),m(a,"class","page-title"),m(s,"class","content")},m(e,n){y(e,s,n),E(s,a),E(a,r),E(a,t),E(t,l),E(s,o),z&&z.m(s,null),E(s,T),b&&b.m(s,null),A=!0},p(e,[a]){e[0]?z?1&a&&n(z,1):(z=R(),z.c(),n(z,1),z.m(s,T)):z&&(P(),c(z,1,1,(()=>{z=null})),$()),e[1].length?b?b.p(e,a):(b=N(e),b.c(),b.m(s,null)):b&&(b.d(1),b=null)},i(e){A||(n(z),A=!0)},o(e){c(z),A=!1},d(e){e&&g(s),z&&z.d(),b&&b.d()}}}function k(e,s,a){let r;b(e,C,(e=>a(3,r=e)));let t=!0,l=[],n=[];return e.$$.update=()=>{8&e.$$.dirty&&async function(){C.gen1.length&&(await Promise.all(C.gen1.map((async e=>{const s=await D.lookupAssetTransactions(e.index,{"tx-type":"axfer"}),a=S.uniqBy(s.transactions.filter((e=>e.group)),"group");await Promise.all(a.map((async s=>{const a=(await D.lookupBlock(s["confirmed-round"])).transactions.filter((e=>e.group===s.group)).filter((e=>"pay"===e["tx-type"]));if(!a.length)return;if(1!==a.filter((e=>e["payment-transaction"].receiver===w.CREATOR_ACCOUNT)).length)return;const r=a.find((e=>e.sender==s["asset-transfer-transaction"].receiver&&e["payment-transaction"].receiver!==w.CREATOR_ACCOUNT&&e["payment-transaction"].receiver!==w.RAND_ACCOUNT));if(!r)return;const t=a.reduce(((e,s)=>e+s["payment-transaction"].amount),0);l.push({unit:e.unit,buyer:s["asset-transfer-transaction"].receiver,seller:r["payment-transaction"].receiver,price:Math.round(t/1e6)})})))}))),a(1,l=l.sort(((e,s)=>s.price-e.price))),l.forEach((e=>{n.includes(e.buyer)||n.push(e.buyer),n.includes(e.seller)||n.push(e.seller)})),console.log(l),a(0,t=!1))}()},[t,l,n,r]}export default class extends e{constructor(e){super(),s(this,e,k,j,a,{})}}
